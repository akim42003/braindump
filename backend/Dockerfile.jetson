# Simplified Dockerfile for Jetson Nano ARM64
FROM node:18-alpine

WORKDIR /app

# Copy everything at once to minimize layers
COPY . .

# Install dependencies with fallback options
RUN npm install --production --no-audit --no-fund --loglevel=error || \
    npm install --production --force || \
    (rm -rf node_modules package-lock.json && npm install --production)

EXPOSE 3000

CMD ["node", "server.js"]